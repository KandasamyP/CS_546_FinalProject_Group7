const mongoCollections = require("../config/mongoCollections");
const petAdopter = mongoCollections.petAdopter;
var ObjectID = require("mongodb").ObjectID;

const exportedMethods = {
  async addPetOwner(petOwnerData) {
    petOwnerData.profilePicture = "";
    petOwnerData.favoritedPets = [];
    petOwnerData.websiteFeedbackGiven = [{}];
    petOwnerData.shelterReviewsGiven = [];
    petOwnerData.reportedPosts = [];
    petOwnerData.donatedItems = [];
    petOwnerData.isVolunteerCandidate = false;
    petOwnerData.fullName = {
      fname: petOwnerData.fname,
      lname: petOwnerData.lname,
    };

    try {
      const petOwnerCollection = await petAdopter();

      const newInsertInformation = await petOwnerCollection.insertOne(
        petOwnerData
      );
      if (newInsertInformation.insertedCount === 0)
        throw {
          status: 500,
          error:
            "Failed to sign up user to DB - Generated by '/data/books.js'.",
        };

      return petOwnerData;
    } catch (e) {
      throw { status: e.status, error: e.error };
    }
  },
};

module.exports = exportedMethods;
